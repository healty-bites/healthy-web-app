import{a as Ct,b as se,c as z,d as B,e as O,f as de,g as Re,h as Oe,i as ke,j as Te,k as Ne,l as Le,m as De,n as Be,o as Ve,p as je,q as ne,r as Ge,s as qe,t as $e}from"./chunk-TEHZGFNC.js";import{Fa as P,Ga as R,Ha as ye,Ia as Fe,Ja as ce,W as T,Z as te,_ as ut,a as dt,aa as Ie,b as pt,ba as le,c as J,ca as ft,d as _,da as me,f as K,fa as Pe,g as Y,ga as F,ha as N,ia as Ae,j as Z,k as re,l as Q,la as L,m as X,ma as D,na as ie,oa as I,r as ee,s as A,t as q}from"./chunk-QW5BO74H.js";import{b as mt,h as W,i as ct,j as E,k as Ee,m as we,n as st,p as w}from"./chunk-NGZ6S22Z.js";import"./chunk-Q64FFBLU.js";import{Ab as f,Bb as b,Cb as S,Eb as V,Hb as C,Ic as G,Jb as g,Jc as lt,Oc as y,Ta as rt,Ub as a,Vb as oe,Wa as l,Wb as u,X as ot,Xb as ae,Yb as pe,Zb as ue,_b as fe,ac as M,ba as c,dc as $,ec as U,fa as x,ia as at,mb as p,oa as h,pa as v,qb as d,ub as k,yb as o,zb as n}from"./chunk-SYLA2I7F.js";import{a as Me,b as nt}from"./chunk-6MDQTQU3.js";var Ue=class i{authService=c(w);isAuthenticated=!1;logout(){this.authService.logout(),this.isAuthenticated=!1}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-nutricionista-layout"]],standalone:!0,features:[M],decls:43,vars:0,consts:[[1,"d-flex"],["id","sidebar",1,"sidebar-toggle"],[1,"sidebar-logo"],["href","#","routerLink","/nutricionista"],[1,"sidebar-nav","p-0"],[1,"sidebar-header"],[1,"sidebar-item"],["href","#","routerLink","gestionar-perfiles/list",1,"sidebar-link"],[1,"fa-solid","fa-users"],["href","#","routerLink","plan-alimenticio/list",1,"sidebar-link"],[1,"fa-solid","fa-calendar-check"],["href","#","routerLink","comida/list",1,"sidebar-link"],[1,"fa-solid","fa-utensils"],["href","#","routerLink","contenido",1,"sidebar-link"],[1,"fa-solid","fa-file"],["href","#","routerLink","recompensa",1,"sidebar-link"],[1,"fa-solid","fa-trophy"],[1,"sidebar-footer"],["href","#","routerLink","/auth/login",1,"sidebar-link",3,"click"],[1,"fa-solid","fa-right-from-bracket"],[1,"main"],[1,"p-3"],[1,"container-fluid"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"aside",1)(2,"div",2)(3,"a",3),a(4,"Healthy Bites"),n()(),o(5,"ul",4),f(6,"li",5),o(7,"li",6)(8,"a",7),f(9,"i",8),o(10,"span"),a(11,"Perfiles Cliente"),n()()(),o(12,"li",6)(13,"a",9),f(14,"i",10),o(15,"span"),a(16,"Plan Alimenticio"),n()()(),o(17,"li",6)(18,"a",11),f(19,"i",12),o(20,"span"),a(21,"Comida"),n()()(),o(22,"li",6)(23,"a",13),f(24,"i",14),o(25,"span"),a(26,"Contenido"),n()()(),o(27,"li",6)(28,"a",15),f(29,"i",16),o(30,"span"),a(31,"Recompensas"),n()()()(),o(32,"div",17)(33,"a",18),C("click",function(){return r.logout()}),f(34,"i",19),o(35,"span"),a(36,"Cerrar Sesion"),n()()()(),o(37,"div",20),f(38,"app-navbar"),o(39,"main",21)(40,"div",22),f(41,"router-outlet"),n()()()(),f(42,"app-footer"))},dependencies:[Ee,ct,pt,dt],styles:['h1[_ngcontent-%COMP%]{font-weight:800}li[_ngcontent-%COMP%]{list-style:none}a[_ngcontent-%COMP%]{text-decoration:none}.main[_ngcontent-%COMP%]{min-height:100vh;width:100%;overflow:hidden;background-color:#f9f9f9;box-shadow:2px 0 10px #0000001a inset}#sidebar[_ngcontent-%COMP%]{max-width:264px;min-width:264px;transition:all .35s ease-in-out;background-color:#fff;display:flex;flex-direction:column}#sidebar.collapsed[_ngcontent-%COMP%]{margin-left:-264px}.toggler-btn[_ngcontent-%COMP%]{background-color:transparent;cursor:pointer;border:0}.toggler-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:#000;font-weight:1000}.navbar[_ngcontent-%COMP%]{padding:1.15rem 1.5rem;border-bottom:2px dashed #b3a8a8}.sidebar-nav[_ngcontent-%COMP%]{flex:1 1 auto}.sidebar-logo[_ngcontent-%COMP%]{padding:1.15rem 1.5rem;text-align:center}.sidebar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-weight:800;font-size:1.5rem}.sidebar-header[_ngcontent-%COMP%]{color:#000;font-size:.75rem;padding:1.5rem 1.5rem .375rem}a.sidebar-link[_ngcontent-%COMP%]{padding:.625rem 1.625rem;color:#000;position:relative;transition:all .35s;display:block;font-size:1.25rem}a.sidebar-link[_ngcontent-%COMP%]:hover{background-color:#c5f2ca}.fa-solid[_ngcontent-%COMP%], .fas[_ngcontent-%COMP%]{margin-right:15px}.sidebar-link[data-bs-toggle=collapse][_ngcontent-%COMP%]:after{border:solid;border-width:0 .075rem .075rem 0;content:"";display:inline-block;padding:2px;position:absolute;right:1.5rem;top:1.4rem;transform:rotate(-135deg);transition:all .2s ease-out}.sidebar-link[data-bs-toggle=collapse].collapsed[_ngcontent-%COMP%]:after{transform:rotate(45deg);transition:all .2s ease-out}@media (max-width:768px){.sidebar-toggle[_ngcontent-%COMP%]{margin-left:-264px}#sidebar.collapsed[_ngcontent-%COMP%]{margin-left:0}}']})};function gt(i,e){if(i&1){let t=V();o(0,"mat-card")(1,"div",6)(2,"div",7)(3,"div",8)(4,"mat-card-header")(5,"mat-card-title")(6,"strong"),a(7),$(8,"formatPlanObjetivo"),n()()(),o(9,"mat-card-content")(10,"p")(11,"strong"),a(12,"Descripcion:"),n(),a(13),n(),o(14,"p")(15,"strong"),a(16,"Duracion:"),n(),a(17),n(),o(18,"p")(19,"strong"),a(20,"Calorias Totales:"),n(),a(21),n(),o(22,"p")(23,"strong"),a(24,"Es gratis:"),n(),a(25),n()(),o(26,"div",9)(27,"button",10),C("click",function(){let m=h(t).$implicit,s=g(2);return v(s.anadirComida(m.id))}),a(28,"A\xF1adir Comida"),n(),o(29,"button",11),C("click",function(){let m=h(t).$implicit,s=g(2);return v(s.editPlanAlimenticio(m.id))}),a(30,"Editar"),n(),o(31,"button",12),C("click",function(){let m=h(t).$implicit,s=g(2);return v(s.deletePlanAlimenticio(m.id))}),a(32,"Eliminar"),n()()()()()()}if(i&2){let t=e.$implicit;l(7),ae("",U(8,6,t.planObjetivo)," - ",t.id,""),l(6),u(" ",t.descripcion," "),l(4),u(" ",t.duracionDias," dias"),l(4),u(" ",t.caloriasTotales," kcal"),l(4),u(" ",t.esGratis," ")}}function ht(i,e){if(i&1){let t=V();o(0,"div",0)(1,"div",1)(2,"h2")(3,"strong"),a(4,"PLAN ALIMENTICIO"),n()()(),o(5,"div")(6,"button",2),C("click",function(){h(t);let m=g();return v(m.createNewPlanAlimenticio())}),f(7,"i",3),a(8," Nuevo Plan "),n()()(),o(9,"div",4),p(10,gt,33,8,"mat-card",5),n()}if(i&2){let t=g();l(10),d("ngForOf",t.filteredPlanAlimenticio)}}function vt(i,e){i&1&&(o(0,"p"),a(1,"No hay planes alimenticios"),n())}var ze=class i{planAlimenticio=[];filteredPlanAlimenticio=[];planAlimenticioService=c(z);authService=c(w);snackBar=c(P);router=c(E);ngOnInit(){this.loadPlanAlimenticio()}loadPlanAlimenticio(){let e=this.authService.getNutricionistaId();this.planAlimenticioService.getPlanAlimenticio(e).subscribe({next:t=>{this.planAlimenticio=t,this.filteredPlanAlimenticio=t,this.showSnackBar("Plan Alimenticio cargado con \xE9xito")},error:t=>{console.error("Error loading plan alimenticio",t),this.showSnackBar("Error al cargar el plan alimenticio")}})}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}createNewPlanAlimenticio(){this.router.navigate(["/nutricionista/plan-alimenticio/create"])}editPlanAlimenticio(e){this.router.navigate(["/nutricionista/plan-alimenticio/edit",e])}anadirComida(e){this.router.navigate([`/nutricionista/plan-alimenticio/comida/${e}/agregar`])}calcularCaloriasTotales(e){let t=0;return this.planAlimenticioService.getPlanAlimenticio(e).subscribe({next:r=>{t=r.reduce((m,s)=>m+s.caloriasTotales,0)},error:r=>{console.error("Error calculating total calories",r),this.showSnackBar("Error al calcular las calor\xEDas totales")}}),t}deletePlanAlimenticio(e){let t=this.authService.getNutricionistaId();this.planAlimenticioService.deletePlanAlimenticio(e,t).subscribe({next:()=>{this.loadPlanAlimenticio(),this.showSnackBar("Plan Alimenticio eliminado con \xE9xito")},error:r=>{console.error("Error deleting plan alimenticio",r),this.showSnackBar("Error al eliminar el plan alimenticio")}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-plan-alimenticio-list"]],standalone:!0,features:[M],decls:3,vars:1,consts:[[1,"plan"],[1,"plan-titulo"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus"],[1,"container"],[4,"ngFor","ngForOf"],[1,"row"],[1,"card"],[1,""],[1,"d-flex","justify-content-start","button-plan","m-3"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ms-3","me-3",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){t&1&&(o(0,"section"),p(1,ht,11,1)(2,vt,2,0,"p"),n()),t&2&&(l(),k(r.planAlimenticio?1:2))},dependencies:[y,G,ne,F,le,me,Pe,ft,R,D,I,A,de],styles:[".plan[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;text-align:center}.plan-titulo[_ngcontent-%COMP%]{flex:1;text-align:center}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:50px}.card[_ngcontent-%COMP%]{width:100%;border:1px solid #e0e0e0}.mat-mdc-card-header[_ngcontent-%COMP%]{text-align:center;justify-content:center;font-size:1.5em;font-weight:700;margin-bottom:15px}.mat-mdc-card[_ngcontent-%COMP%]{box-shadow:none}.button-plan[_ngcontent-%COMP%]{margin:10px}"]})};var He=class i{transform(e){return e.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=at({name:"formatCategoriaComida",type:i,pure:!0,standalone:!0})};function bt(i,e){if(i&1&&(o(0,"mat-option",1),a(1),n()),i&2){let t=e.$implicit;d("value",t.planAlimenticioId),l(),u(" Plan: ",t.planAlimenticioId," ")}}function St(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"No."),n())}function Mt(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.index;l(),u(" ",t+1," ")}}function Et(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Nombre Comida"),n())}function wt(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.nombreComida," ")}}function It(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Categoria"),n())}function Pt(i,e){if(i&1&&(o(0,"mat-cell"),a(1),$(2,"formatCategoriaComida"),n()),i&2){let t=e.$implicit;l(),u(" ",U(2,1,t.categoria)," ")}}function At(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Calorias"),n())}function yt(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.calorias," ")}}function Ft(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Plan asociado"),n())}function Rt(i,e){if(i&1&&(o(0,"mat-cell"),a(1),$(2,"formatPlanObjetivo"),n()),i&2){let t=e.$implicit;l(),ae(" ",U(2,2,t.nombrePlanAlimenticio)," - ",t.planAlimenticioId," ")}}function Ot(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Acciones"),n())}function kt(i,e){if(i&1){let t=V();o(0,"mat-cell")(1,"div",14)(2,"button",15),C("click",function(){let m=h(t).$implicit,s=g();return v(s.editarComidaNavigate(m.planAlimenticioId,m.id))}),a(3," Editar "),n(),o(4,"button",16),C("click",function(){let m=h(t).$implicit,s=g();return v(s.deleteComida(m.planAlimenticioId,m.id))}),a(5," Eliminar "),n()()()}}function Tt(i,e){i&1&&f(0,"mat-header-row")}function Nt(i,e){i&1&&f(0,"mat-row")}var We=class i{comida=[];filteredComidas=[];selectedPlanId=null;uniquePlans=[];comidaService=c(qe);snackBar=c(P);planId=c(z);router=c(E);authService=c(w);planAlimenticioService=c(z);displayedColumns=["id","nombreComida","calorias","categoria","nombrePlanAlimenticio","acciones"];ngOnInit(){this.loadComida()}loadComida(){let e=this.authService.getNutricionistaId();this.comidaService.getAllByNutricionistaId(e).subscribe({next:t=>{this.comida=t,this.filteredComidas=t,this.extractUniquePlans(),this.showSnackBar("Comida cargada con \xE9xito")},error:t=>{console.error("Error loading comida",t),this.showSnackBar("Error al cargar la comida")}})}deleteComida(e,t){this.comidaService.deleteComida(e,t).subscribe({next:()=>{this.loadComida(),this.showSnackBar("Comida eliminada con \xE9xito")},error:r=>{console.error("Error deleting comida",r),this.showSnackBar("Error al eliminar la comida")}})}editarComidaNavigate(e,t){this.router.navigate([`/nutricionista/plan-alimenticio/comida/${e}/editar/${t}`])}extractUniquePlans(){let e=new Set;this.uniquePlans=this.comida.filter(t=>e.has(t.planAlimenticioId)?!1:(e.add(t.planAlimenticioId),!0)).map(t=>({planAlimenticioId:t.planAlimenticioId,nombrePlanAlimenticio:t.nombrePlanAlimenticio}))}filterComidas(){this.selectedPlanId===null?this.filteredComidas=this.comida:this.filteredComidas=this.comida.filter(e=>e.planAlimenticioId===this.selectedPlanId)}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-comida-list"]],standalone:!0,features:[M],decls:28,vars:6,consts:[[3,"valueChange","selectionChange","value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"dataSource"],["matColumnDef","id"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nombreComida"],["matColumnDef","categoria"],["matColumnDef","calorias"],["matColumnDef","nombrePlanAlimenticio"],["matColumnDef","acciones"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"button-group","d-flex"],["mat-raised-button","",1,"btn","btn-primary","me-3",3,"click"],["mat-raised-button","",1,"btn","btn-danger",3,"click"]],template:function(t,r){t&1&&(o(0,"mat-form-field")(1,"mat-label"),a(2,"Filtrar por Id de Plan:"),n(),o(3,"mat-select",0),fe("valueChange",function(s){return ue(r.selectedPlanId,s)||(r.selectedPlanId=s),s}),C("selectionChange",function(){return r.filterComidas()}),o(4,"mat-option",1),a(5,"Todos los planes"),n(),p(6,bt,2,2,"mat-option",2),n()(),o(7,"mat-table",3),b(8,4),p(9,St,2,0,"mat-header-cell",5)(10,Mt,2,1,"mat-cell",6),S(),b(11,7),p(12,Et,2,0,"mat-header-cell",5)(13,wt,2,1,"mat-cell",6),S(),b(14,8),p(15,It,2,0,"mat-header-cell",5)(16,Pt,3,3,"mat-cell",6),S(),b(17,9),p(18,At,2,0,"mat-header-cell",5)(19,yt,2,1,"mat-cell",6),S(),b(20,10),p(21,Ft,2,0,"mat-header-cell",5)(22,Rt,3,4,"mat-cell",6),S(),b(23,11),p(24,Ot,2,0,"mat-header-cell",5)(25,kt,6,0,"mat-cell",6),S(),p(26,Tt,1,0,"mat-header-row",12)(27,Nt,1,0,"mat-row",13),n()),t&2&&(l(3),pe("value",r.selectedPlanId),l(),d("value",null),l(2),d("ngForOf",r.uniquePlans),l(),d("dataSource",r.filteredComidas),l(19),d("matHeaderRowDef",r.displayedColumns),l(),d("matRowDefColumns",r.displayedColumns))},dependencies:[y,G,ne,Re,ke,De,Te,Oe,Be,Ne,Le,Ve,je,D,L,N,O,B,T,I,A,de,He],styles:[".plan[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;text-align:center}.plan-titulo[_ngcontent-%COMP%]{flex:1;text-align:center}"]})};var Je=class i{baseUrl=`${st.baseUrl}/admin/cliente`;http=c(mt);getAllClientes(){return this.http.get(`${this.baseUrl}`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ot({token:i,factory:i.\u0275fac,providedIn:"root"})};function Lt(i,e){if(i&1&&(o(0,"mat-card")(1,"div",4)(2,"div",5)(3,"div")(4,"mat-card-header")(5,"mat-card-content")(6,"p")(7,"strong"),a(8,"Nombre: "),n(),a(9),n(),o(10,"p")(11,"strong"),a(12,"Sexo: "),n(),a(13),n(),o(14,"p")(15,"strong"),a(16,"Edad: "),n(),a(17),n(),o(18,"p")(19,"strong"),a(20,"Altura: "),n(),a(21),n(),o(22,"p")(23,"strong"),a(24,"Peso: "),n(),a(25),n()()()()()()()),i&2){let t=e.$implicit;l(9),ae(" ",t.nombre," ",t.apellido," "),l(4),u(" ",t.sexo,""),l(4),u(" ",t.edad," "),l(4),u(" ",t.altura," cm"),l(4),u(" ",t.peso," kg")}}function Dt(i,e){if(i&1&&(o(0,"div",0)(1,"div",1)(2,"h2")(3,"strong"),a(4,"CLIENTES"),n()()()(),o(5,"div",2),p(6,Lt,26,6,"mat-card",3),n()),i&2){let t=g();l(6),d("ngForOf",t.filteredClientes)}}function Bt(i,e){i&1&&(o(0,"p"),a(1,"No hay clientes"),n())}var Ke=class i{clientes=[];filteredClientes=[];gestionarPerfilService=c(Je);snackBar=c(P);router=c(E);ngOnInit(){this.loadClientes()}loadClientes(){this.gestionarPerfilService.getAllClientes().subscribe({next:e=>{this.clientes=e,this.filteredClientes=e,this.showSnackBar("Clientes cargados con \xE9xito")},error:e=>{console.error("Error loading clientes",e),this.showSnackBar("Error al cargar los clientes")}})}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-gestionar-clientes-list"]],standalone:!0,features:[M],decls:3,vars:1,consts:[[1,"plan"],[1,"plan-titulo"],[1,"container"],[4,"ngFor","ngForOf"],[1,"row"],[1,"card"]],template:function(t,r){t&1&&(o(0,"section"),p(1,Dt,7,1)(2,Bt,2,0,"p"),n()),t&2&&(l(),k(r.clientes?1:2))},dependencies:[y,G,ne,F,le,me,Pe,D,R,I,A],styles:[".plan[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;text-align:center}.plan-titulo[_ngcontent-%COMP%]{flex:1;text-align:center}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:50px}.card[_ngcontent-%COMP%]{width:100%;border:1px solid #e0e0e0}.mat-mdc-card-header[_ngcontent-%COMP%]{justify-content:center;margin:5px}.mat-mdc-card[_ngcontent-%COMP%]{box-shadow:none}.button-plan[_ngcontent-%COMP%]{margin:10px}.button-plan[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-left:5px}"]})};function Vt(i,e){if(i&1&&(o(0,"mat-option",7),a(1),n()),i&2){let t=e.$implicit;d("value",t.tipoContenido),l(),u(" ",t.tipoContenido," ")}}function jt(i,e){if(i&1&&(o(0,"mat-option",7),a(1),n()),i&2){let t=e.$implicit;d("value",t.categoriaContenido),l(),u(" ",t.categoriaContenido," ")}}function Gt(i,e){if(i&1){let t=V();o(0,"mat-card")(1,"div",13)(2,"div",14)(3,"div")(4,"mat-card-content"),f(5,"img",15),$(6,"apiImg"),o(7,"p")(8,"strong"),a(9,"Titulo: "),n(),a(10),n(),o(11,"p")(12,"strong"),a(13,"Descripcion: "),n(),a(14),n(),o(15,"p")(16,"strong"),a(17,"Tipo Contenido: "),n(),a(18),n(),o(19,"p")(20,"strong"),a(21,"Categoria Contenido: "),n(),a(22),n(),o(23,"p")(24,"strong"),a(25,"Es gratis: "),n(),a(26),n(),o(27,"p"),f(28,"strong"),n(),o(29,"div",16)(30,"button",2),C("click",function(){let m=h(t).$implicit,s=g(2);return v(s.editContenido(m.id))}),a(31,"Editar"),n(),o(32,"button",17),C("click",function(){let m=h(t).$implicit,s=g(2);return v(s.deleteContenido(m.id))}),a(33,"Eliminar"),n()()()()()()()}if(i&2){let t=e.$implicit;l(5),d("src",U(6,6,t.coverPath),rt),l(5),u(" ",t.titulo,""),l(4),u(" ",t.descripcion,""),l(4),u(" ",t.tipoContenido,""),l(4),u(" ",t.categoriaContenido,""),l(4),u(" ",t.esGratis," ")}}function qt(i,e){if(i&1){let t=V();o(0,"div",0)(1,"div",1)(2,"h2")(3,"strong"),a(4,"CONTENIDO"),n()()(),o(5,"div")(6,"button",2),C("click",function(){h(t);let m=g();return v(m.createContenido())}),f(7,"i",3),a(8," Nuevo Contenido "),n()()(),o(9,"div",4)(10,"div")(11,"h4"),f(12,"i",5),a(13," Tipo de Contenido"),n(),o(14,"mat-form-field")(15,"mat-label"),a(16,"Filtro Tipo de Contenido"),n(),o(17,"mat-select",6),fe("valueChange",function(m){h(t);let s=g();return ue(s.selectTipoContenido,m)||(s.selectTipoContenido=m),v(m)}),C("selectionChange",function(){h(t);let m=g();return v(m.filterContenido())}),o(18,"mat-option",7),a(19,"Todos los contenidos"),n(),p(20,Vt,2,2,"mat-option",8),n()()(),o(21,"div",9)(22,"h4"),f(23,"i",10),a(24," Categoria de Contenido"),n(),o(25,"mat-form-field")(26,"mat-label"),a(27,"Filtro Categoria de Contenido"),n(),o(28,"mat-select",6),fe("valueChange",function(m){h(t);let s=g();return ue(s.selectCategoriaContenido,m)||(s.selectCategoriaContenido=m),v(m)}),C("selectionChange",function(){h(t);let m=g();return v(m.filterContenido())}),o(29,"mat-option",7),a(30,"Todas las categorias"),n(),p(31,jt,2,2,"mat-option",8),n()()()(),o(32,"div",11),p(33,Gt,34,8,"mat-card",12),n()}if(i&2){let t=g();l(17),pe("value",t.selectTipoContenido),l(),d("value",null),l(2),d("ngForOf",t.uniqueContenido),l(8),pe("value",t.selectCategoriaContenido),l(),d("value",null),l(2),d("ngForOf",t.uniqueCategoriaContenido),l(2),d("ngForOf",t.filteredContenido)}}var Ye=class i{contenido=[];filteredContenido=[];selectTipoContenido=null;uniqueContenido=[];selectCategoriaContenido=null;uniqueCategoriaContenido=[];contenidoService=c(se);mediaService=c(Ge);authService=c(w);snackBar=c(P);router=c(E);ngOnInit(){this.loadContenido()}loadContenido(){let e=this.authService.getNutricionistaId();this.contenidoService.getAllContenidosByNutricionistaId(e).subscribe({next:t=>{this.contenido=t,this.filteredContenido=t;let r=Array.from(new Set(t.map(s=>s.tipoContenido)));this.uniqueContenido=r.map(s=>({tipoContenido:s}));let m=Array.from(new Set(t.map(s=>s.categoriaContenido)));this.uniqueCategoriaContenido=m.map(s=>({categoriaContenido:s})),console.log(t),this.showSnackBar("Contenido cargado con \xE9xito")},error:t=>{console.error("Error loading contenido",t),this.showSnackBar("Error al cargar el contenido")}})}filterContenido(){this.filteredContenido=this.contenido.filter(e=>{let t=this.selectTipoContenido?e.tipoContenido===this.selectTipoContenido:!0,r=this.selectCategoriaContenido?e.categoriaContenido===this.selectCategoriaContenido:!0;return t&&r})}createContenido(){this.router.navigate(["/nutricionista/contenido/create"])}editContenido(e){this.router.navigate(["/nutricionista/contenido/edit",e])}deleteContenido(e){this.contenidoService.deleteContenido(e).subscribe({next:()=>{this.loadContenido(),this.showSnackBar("Contenido eliminado con \xE9xito")},error:t=>{console.error("Error deleting contenido",t),this.showSnackBar("Error al eliminar el contenido")}})}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-contenido-list"]],standalone:!0,features:[M],decls:2,vars:1,consts:[[1,"plan"],[1,"plan-titulo"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus"],[1,"d-flex","filtros"],[1,"fa-solid","fa-filter"],[3,"valueChange","selectionChange","value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"ms-3"],[1,"fa-solid","fa-tag"],[1,"container"],[4,"ngFor","ngForOf"],[1,"row"],[1,"card"],["alt","Cover",3,"src"],[1,"d-flex"],[1,"ms-3","btn","btn-danger",3,"click"]],template:function(t,r){t&1&&(o(0,"section"),p(1,qt,34,7),n()),t&2&&(l(),k(r.contenido?1:-1))},dependencies:[y,G,q,Ct,we,D,L,N,I,Ie,O,B,T,R,F,le,me],styles:[".plan[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;text-align:center}.plan-titulo[_ngcontent-%COMP%]{flex:1;text-align:center}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:50px}.card[_ngcontent-%COMP%]{width:100%;border:1px solid #e0e0e0}.mat-mdc-card-header[_ngcontent-%COMP%]{text-align:center;justify-content:center;font-size:1.5em;font-weight:700;margin-bottom:15px}.mat-mdc-card-content[_ngcontent-%COMP%]:first-child{padding-bottom:16px}.mat-mdc-card[_ngcontent-%COMP%]{box-shadow:none}.button-plan[_ngcontent-%COMP%]{margin:10px}.button-plan[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-left:5px}img[_ngcontent-%COMP%]{width:100%;max-width:100%;max-height:300px;object-fit:contain;border-radius:8px;margin-bottom:15px}.filtros[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-top:10px;font-size:20px}"]})};function Ut(i,e){i&1&&a(0," Editar Contenido ")}function zt(i,e){i&1&&a(0," Crear Contenido ")}function Ht(i,e){i&1&&a(0," Este t\xEDtulo es obligatorio ")}function Wt(i,e){i&1&&a(0," El t\xEDtulo debe tener al menos 3 caracteres ")}function Jt(i,e){i&1&&a(0," El t\xEDtulo debe tener 250 caracteres como m\xE1ximo ")}function Kt(i,e){i&1&&a(0," Este slug es obligatorio ")}function Yt(i,e){i&1&&a(0," El slug es inv\xE1lido ")}function Zt(i,e){i&1&&a(0," La descripci\xF3n es obligatoria ")}function Qt(i,e){i&1&&a(0," Actualizar ")}function Xt(i,e){i&1&&a(0," Crear ")}var ve=class i{contenidoService=c(se);mediaService=c(Ge);authService=c(w);fb=c(ee);router=c(E);snackBar=c(P);route=c(W);fileAccept="";errors=[];isEditMode=!1;contenidoId=null;form=this.fb.group({titulo:["",[_.required,_.minLength(3),_.maxLength(250)]],descripcion:["",[_.required]],slug:["",[_.required,_.pattern("[a-z0-9-]+")]],tipoContenido:["",_.required],categoriaContenido:["",_.required],coverPath:[""],filePath:[""],esGratis:[null,_.required],nutricionistaId:[""]});ngOnInit(){this.route.paramMap.subscribe(e=>{let t=e.get("id");this.isEditMode=!!t,this.contenidoId=t?Number(t):null,this.isEditMode&&t&&this.loadContenido(Number(t))}),this.form.get("tipoContenido")?.valueChanges.subscribe(e=>{this.updateFileAccept(e)})}loadContenido(e){this.contenidoService.getContentById(e).subscribe({next:t=>{this.form.patchValue(t)},error:()=>{this.snackBar.open("Error al cargar el contenido","Cerrar",{duration:3e3}),this.router.navigate(["/nutricionista/contenido"])}})}onTipoContenidoChange(e){let t=e.value;this.updateFileAccept(t)}updateFileAccept(e){switch(e){case"VIDEO":this.fileAccept=".mp4";break;case"ARTICULO":this.fileAccept=".pdf";break;case"GUIA":this.fileAccept=".pdf,.doc,.docx,.txt";break;default:this.fileAccept="";break}}uploadFile(e,t){let r=e.target.files?.[0];if(r){let m=t==="coverPath"?["png","jpg","jpeg"]:this.fileAccept.split(",").map(Qe=>Qe.replace(".","")),s=r.name.split(".").pop()?.toLowerCase();if(s&&!m.includes(s)){this.errors.push(`Archivo no permitido. Extensiones v\xE1lidas: ${m.join(", ")}`);return}let it=new FormData;it.append("file",r),this.mediaService.upload(it).subscribe({next:Qe=>this.form.controls[t].setValue(Qe.path),error:()=>this.errors.push("Error al cargar el archivo.")})}}createSlug(){let e=this.form.get("titulo")?.value.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");this.form.get("slug")?.setValue(e)}save(){if(this.form.invalid){this.form.markAllAsTouched();return}let e=nt(Me({},this.form.value),{nutricionistaId:this.authService.getUser()?.nutricionistaId});this.isEditMode&&this.contenidoId?this.contenidoService.updateContenido(this.contenidoId,e).subscribe({next:()=>{this.snackBar.open("Contenido actualizado exitosamente","Cerrar",{duration:3e3}),this.router.navigate(["/nutricionista/contenido"])},error:()=>{this.snackBar.open("Error al actualizar el contenido","Cerrar",{duration:3e3})}}):this.contenidoService.crearContenido(e).subscribe({next:()=>{this.snackBar.open("Contenido creado exitosamente","Cerrar",{duration:3e3}),this.router.navigate(["/nutricionista/contenido"])},error:()=>{this.snackBar.open("Error al crear el contenido","Cerrar",{duration:3e3})}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-contenido-form"]],standalone:!0,features:[M],decls:74,vars:11,consts:[[1,"wa"],[1,"form-container"],[1,"titulo"],["autocomplete","off",1,"mt-5","form-contenido",3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field","w-100"],["matInput","","type","text","placeholder","T\xEDtulo","formControlName","titulo",3,"keyup"],["matInput","","type","text","placeholder","Slug","formControlName","slug"],["matInput","","placeholder","Descripci\xF3n","formControlName","descripcion"],["formControlName","tipoContenido",3,"selectionChange"],["value","VIDEO"],["value","ARTICULO"],["value","GUIA"],["formControlName","categoriaContenido"],["value","NUTRICION"],["value","EJERCICIO"],["value","SALUD_MENTAL"],[1,"mb-3","form-field"],["formControlName","esGratis",1,"d-flex","container-radio-button"],["id","esGratis"],[3,"value"],[1,"file-upload","w-100"],["type","file","accept",".png,.jpg,.jpeg",1,"form-control",3,"change"],[1,"small","text-muted"],["type","file",1,"form-control",3,"change","accept"],[1,"action-buttons","text-end"],["mat-button","","type","button","routerLink","/nutricionista/contenido"],["mat-raised-button","","color","primary",1,"ms-2"]],template:function(t,r){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2)(3,"strong"),p(4,Ut,1,0)(5,zt,1,0),n()(),o(6,"form",3),C("ngSubmit",function(){return r.save()}),o(7,"mat-form-field",4)(8,"mat-label"),a(9,"T\xEDtulo"),n(),o(10,"input",5),C("keyup",function(){return r.createSlug()}),n(),o(11,"mat-error"),p(12,Ht,1,0)(13,Wt,1,0)(14,Jt,1,0),n()(),o(15,"mat-form-field",4)(16,"mat-label"),a(17,"Slug"),n(),f(18,"input",6),o(19,"mat-error"),p(20,Kt,1,0)(21,Yt,1,0),n()(),o(22,"mat-form-field",4)(23,"mat-label"),a(24,"Descripci\xF3n"),n(),f(25,"textarea",7),o(26,"mat-error"),p(27,Zt,1,0),n()(),o(28,"mat-form-field",4)(29,"mat-label"),a(30,"Tipo de Contenido"),n(),o(31,"mat-select",8),C("selectionChange",function(s){return r.onTipoContenidoChange(s)}),o(32,"mat-option",9),a(33,"Video"),n(),o(34,"mat-option",10),a(35,"Art\xEDculo"),n(),o(36,"mat-option",11),a(37,"Gu\xEDa"),n()()(),o(38,"mat-form-field",4)(39,"mat-label"),a(40,"Categoria de Contenido"),n(),o(41,"mat-select",12)(42,"mat-option",13),a(43,"Nutricion"),n(),o(44,"mat-option",14),a(45,"Ejercicio"),n(),o(46,"mat-option",15),a(47,"Salud Mental"),n()()(),o(48,"div",16)(49,"mat-radio-group",17)(50,"label",18),a(51,"Es gratis: "),n(),o(52,"mat-radio-button",19),a(53,"S\xED"),n(),o(54,"mat-radio-button",19),a(55,"No"),n()()(),o(56,"div",20)(57,"label"),a(58,"Portada"),n(),o(59,"input",21),C("change",function(s){return r.uploadFile(s,"coverPath")}),n(),o(60,"div",22),a(61),n()(),o(62,"div",20)(63,"label"),a(64,"Archivo"),n(),o(65,"input",23),C("change",function(s){return r.uploadFile(s,"filePath")}),n(),o(66,"div",22),a(67),n()(),o(68,"div",24)(69,"button",25),a(70," Cancelar "),n(),o(71,"button",26),p(72,Qt,1,0)(73,Xt,1,0),n()()()()()),t&2){let m;l(4),k(r.contenidoId?4:5),l(2),d("formGroup",r.form),l(6),k(r.form.get("titulo").hasError("required")?12:(m=r.form.get("titulo"))!=null&&m.hasError("minlength")?13:(m=r.form.get("titulo"))!=null&&m.hasError("maxlength")?14:-1),l(8),k(r.form.get("slug").hasError("required")?20:r.form.get("slug").hasError("pattern")?21:-1),l(7),k(r.form.get("descripcion").hasError("required")?27:-1),l(25),d("value",!0),l(2),d("value",!1),l(7),u(" Ruta actual: ",r.form.get("coverPath").value," "),l(4),d("accept",r.fileAccept),l(2),u(" Ruta actual: ",r.form.get("filePath").value," "),l(5),k(r.contenidoId?72:73)}},dependencies:[q,Z,J,K,Y,Q,X,we,Ee,D,L,N,Ae,I,ie,F,A,te,T,ce,ye,Fe,O,B,Ie,ut,R],styles:[".wa[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;background-color:#f9f9f9}.form-container[_ngcontent-%COMP%]{width:100%;max-width:600px;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 6px #0000001a}.form-contenido[_ngcontent-%COMP%]{width:100%;gap:20px}.titulo[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}.file-upload[_ngcontent-%COMP%]{margin:15px 0}textarea[_ngcontent-%COMP%]{min-height:50px;max-height:200px}.container-radio-button[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center}"]})};var tt=(r=>(r.DEFICIT="DEFICIT",r.MANTENIMIENTO_PESO="MANTENIMIENTO_PESO",r.AUMENTO_MASA_MUSCULAR="AUMENTO_MASA_MUSCULAR",r))(tt||{});var xe=class i{planAlimenticioForm;objetivos=Object.values(tt);isEditMode=!1;fb=c(ee);router=c(E);snackBar=c(P);authService=c(w);planAlimenticioService=c(z);route=c(W);constructor(){this.planAlimenticioForm=this.fb.group({id:[null],planObjetivo:["",_.required],descripcion:["",[_.required,_.minLength(10)]],duracionDias:["",[_.required,_.min(1)]],esGratis:[null,_.required],nutricionistaId:[this.authService.getNutricionistaId()]})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isEditMode=!0,this.loadPlanAlimenticio(Number(e))):this.isEditMode=!1}controlHasError(e,t){return this.planAlimenticioForm.controls[e].hasError(t)}loadPlanAlimenticio(e){let t=this.authService.getNutricionistaId();this.planAlimenticioService.getPlanAlimenticioById(e,t).subscribe({next:r=>{r?this.planAlimenticioForm.patchValue(r):(this.showSnackBar("No se encontr\xF3 el plan alimenticio"),this.router.navigate(["/nutricionista/plan-alimenticio/list"]))},error:()=>{this.showSnackBar("Error al cargar el plan alimenticio")}})}onSubmit(){if(this.planAlimenticioForm.valid){let e=this.planAlimenticioForm.value;if(this.isEditMode){let t=e.id;this.planAlimenticioService.updatePlanAlimenticio(t,e,this.authService.getNutricionistaId()).subscribe({next:()=>{this.showSnackBar("Plan alimenticio actualizado correctamente"),this.router.navigate(["/nutricionista/plan-alimenticio/list"])},error:()=>{this.showSnackBar("Error al actualizar el plan alimenticio")}})}else this.planAlimenticioService.createPlanAlimenticio(e).subscribe({next:()=>{this.showSnackBar("Plan alimenticio creado correctamente"),this.router.navigate(["/nutricionista/plan-alimenticio/list"])},error:()=>{this.showSnackBar("Error al crear el plan alimenticio")}})}else this.showSnackBar("Por favor, complete correctamente los campos.")}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-plan-alimenticio-form-create-update"]],standalone:!0,features:[M],decls:39,vars:5,consts:[[1,"container-form"],[1,"form-section",3,"ngSubmit","formGroup"],[1,"text-center"],[1,""],[1,"form-field"],["formControlName","planObjetivo"],["value","DEFICIT"],["value","MANTENIMIENTO_PESO"],["value","AUMENTO_MASA_MUSCULAR"],["matInput","","formControlName","descripcion","type","text","placeholder","Ingrese la descripci\xF3n"],["matInput","","formControlName","duracionDias","type","number","placeholder","Ingrese los d\xEDas"],[1,"mb-3","form-field"],["formControlName","esGratis",1,"d-flex","container-radio-button"],["id","esGratis"],[3,"value"],[1,"row","justify-content-between"],["routerLink","/nutricionista/plan-alimenticio/list",1,"btn","btn-danger","col","btn-update"],["mat-raised-button","","color","primary","type","submit",1,"btn","btn-primary","col","btn-update"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"form",1),C("ngSubmit",function(){return r.onSubmit()}),o(2,"h2",2)(3,"strong"),a(4),n()(),o(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),a(8,"Plan Objetivo"),n(),o(9,"mat-select",5)(10,"mat-option",6),a(11,"D\xE9ficit"),n(),o(12,"mat-option",7),a(13,"Mantenimiento Peso"),n(),o(14,"mat-option",8),a(15,"Aumento Masa Muscular"),n()()()(),o(16,"div",3)(17,"mat-form-field",4)(18,"mat-label"),a(19,"Descripci\xF3n"),n(),f(20,"input",9),n()(),o(21,"div")(22,"mat-form-field",4)(23,"mat-label"),a(24,"Duraci\xF3n de D\xEDas"),n(),f(25,"input",10),n()(),o(26,"div",11)(27,"mat-radio-group",12)(28,"label",13),a(29,"Es gratis: "),n(),o(30,"mat-radio-button",14),a(31,"S\xED"),n(),o(32,"mat-radio-button",14),a(33,"No"),n()()(),o(34,"div",15)(35,"button",16),a(36," Cancelar "),n(),o(37,"button",17),a(38),n()()()()),t&2&&(l(),d("formGroup",r.planAlimenticioForm),l(3),oe(r.isEditMode?"Actualizar Plan Alimenticio":"Crear Plan Alimenticio"),l(26),d("value",!0),l(2),d("value",!1),l(6),u(" ",r.isEditMode?"Actualizar":"Crear Plan Alimenticio"," "))},dependencies:[I,ie,L,N,F,A,Z,J,re,K,Y,q,Q,X,R,te,T,ce,ye,Fe,O,B],styles:[".container-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:85vh}h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.form-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:100%;max-width:500px}.form-field[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}button[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px}label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:700}#esGratis[_ngcontent-%COMP%]{text-align:center;margin:auto 0}.container-radio-button[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center}"]})};function ei(i,e){i&1&&(o(0,"mat-error"),a(1," Este campo es obligatorio "),n())}function ti(i,e){i&1&&(o(0,"mat-error"),a(1," Este campo es obligatorio "),n())}function ii(i,e){i&1&&(o(0,"mat-error"),a(1," Introduzca un n\xFAmero v\xE1lido. "),n())}var be=class i{comidaForm;titulo;textoBoton;isEditMode=!1;planAlimenticioId;fb=c(ee);router=c(E);snackBar=c(P);comidaService=c(qe);authService=c(w);route=c(W);ngOnInit(){this.planAlimenticioId=Number(this.route.snapshot.paramMap.get("planId"));let e=this.route.snapshot.paramMap.get("comidaId");this.isEditMode=!!e,this.titulo=this.isEditMode?"Editar Comida":"A\xF1adir Comida",this.textoBoton=this.isEditMode?"Actualizar Comida":"A\xF1adir Comida",this.comidaForm=this.fb.group({nombreComida:["",_.required],calorias:["",[_.required,_.min(0)]],categoria:["",_.required],planAlimenticioId:[this.planAlimenticioId,_.required]}),this.isEditMode&&this.loadComida(Number(e))}controlHasError(e,t){return this.comidaForm.controls[e]?.hasError(t)??!1}loadComida(e){if(!this.authService.getNutricionistaId()){this.showSnackBar("Usuario no autenticado."),this.router.navigate(["/auth/login"]);return}this.comidaService.getComidaById(this.planAlimenticioId,e).subscribe({next:r=>this.comidaForm.patchValue(r),error:()=>this.showSnackBar("Error al cargar la comida.")})}onSubmit(){if(this.comidaForm.invalid){this.showSnackBar("Por favor, completa correctamente todos los campos.");return}let e=this.comidaForm.value;if(this.isEditMode){let t=Number(this.route.snapshot.paramMap.get("comidaId"));this.comidaService.editComida(this.planAlimenticioId,t,e).subscribe({next:()=>{this.showSnackBar("Comida actualizada correctamente."),this.router.navigate(["/nutricionista/comida/list"])},error:()=>this.showSnackBar("Error al actualizar la comida.")})}else this.comidaService.createComida(this.planAlimenticioId,e).subscribe({next:()=>{this.showSnackBar("Comida a\xF1adida correctamente."),this.router.navigate(["/nutricionista/plan-alimenticio/list"])},error:()=>this.showSnackBar("Error al a\xF1adir la comida.")})}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-comida-form"]],standalone:!0,features:[M],decls:33,vars:6,consts:[[1,"container-form"],[1,"form-section",3,"ngSubmit","formGroup"],[1,"text-center"],[1,"form-field"],["formControlName","categoria"],["value","DESAYUNO"],["value","ALMUERZO"],["value","CENA"],["value","SNACK"],["matInput","","formControlName","nombreComida","type","text","placeholder","Ingrese el nombre de la comida"],[4,"ngIf"],["matInput","","formControlName","calorias","type","number","placeholder","Ingrese las calor\xEDas"],["mat-raised-button","","color","primary","type","submit",1,"btn","btn-primary"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"form",1),C("ngSubmit",function(){return r.onSubmit()}),o(2,"h2",2)(3,"strong"),a(4),n()(),o(5,"div")(6,"mat-form-field",3)(7,"mat-label"),a(8,"Categoria de Comida"),n(),o(9,"mat-select",4)(10,"mat-option",5),a(11,"Desayuno"),n(),o(12,"mat-option",6),a(13,"Almuerzo"),n(),o(14,"mat-option",7),a(15,"Cena"),n(),o(16,"mat-option",8),a(17,"Snack"),n()()()(),o(18,"div")(19,"mat-form-field",3)(20,"mat-label"),a(21,"Nombre de Comida"),n(),f(22,"input",9),p(23,ei,2,0,"mat-error",10),n()(),o(24,"div")(25,"mat-form-field",3)(26,"mat-label"),a(27,"Calor\xEDas"),n(),f(28,"input",11),p(29,ti,2,0,"mat-error",10)(30,ii,2,0,"mat-error",10),n()(),o(31,"button",12),a(32),n()()()),t&2&&(l(),d("formGroup",r.comidaForm),l(3),oe(r.titulo),l(19),d("ngIf",r.controlHasError("nombreComida","required")),l(6),d("ngIf",r.controlHasError("calorias","required")),l(),d("ngIf",r.controlHasError("calorias","min")),l(2),u(" ",r.textoBoton," "))},dependencies:[y,lt,I,ie,L,N,Ae,F,A,Z,J,re,K,Y,q,Q,X,R,te,T,ce,O,B],styles:[".container-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:85vh}h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.form-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:100%;max-width:500px}.form-field[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}button[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px}label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:700}#esGratis[_ngcontent-%COMP%]{text-align:center;margin:auto 0}.container-radio-button[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center}"]})};function ni(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"No."),n())}function oi(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.index;l(),u(" ",t+1," ")}}function ai(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Nombre"),n())}function ri(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.nombre," ")}}function li(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Descripcion"),n())}function mi(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.descripcion," ")}}function ci(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Dias Requeridos"),n())}function si(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.diasRequeridos," ")}}function di(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Plan Alimenticio"),n())}function pi(i,e){if(i&1&&(o(0,"mat-cell"),a(1),$(2,"formatPlanObjetivo"),n()),i&2){let t=e.$implicit;l(),u(" ",U(2,1,t.planAlimenticioTitulo)," ")}}function ui(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Acciones"),n())}function fi(i,e){if(i&1){let t=V();o(0,"mat-cell")(1,"div",16)(2,"button",17),C("click",function(){let m=h(t).$implicit,s=g();return v(s.editarRecompensaNavigate(m.id))}),a(3," Editar "),n(),o(4,"button",18),C("click",function(){let m=h(t).$implicit,s=g();return v(s.deleteRecompensa(m.id))}),a(5," Eliminar "),n()()()}}function Ci(i,e){i&1&&f(0,"mat-header-row")}function _i(i,e){i&1&&f(0,"mat-row")}function gi(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"No."),n())}function hi(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.index;l(),u(" ",t+1," ")}}function vi(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Nombre"),n())}function xi(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.nombre," ")}}function bi(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Descripcion"),n())}function Si(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.descripcion," ")}}function Mi(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Dias Requeridos"),n())}function Ei(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.diasRequeridos," ")}}function wi(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Contenido"),n())}function Ii(i,e){if(i&1&&(o(0,"mat-cell"),a(1),n()),i&2){let t=e.$implicit;l(),u(" ",t.contenidoTitulo," ")}}function Pi(i,e){i&1&&(o(0,"mat-header-cell"),a(1,"Acciones"),n())}function Ai(i,e){if(i&1){let t=V();o(0,"mat-cell")(1,"div",16)(2,"button",17),C("click",function(){let m=h(t).$implicit,s=g();return v(s.editarRecompensaNavigate(m.id))}),a(3," Editar "),n(),o(4,"button",18),C("click",function(){let m=h(t).$implicit,s=g();return v(s.deleteRecompensa(m.id))}),a(5," Eliminar "),n()()()}}function yi(i,e){i&1&&f(0,"mat-header-row")}function Fi(i,e){i&1&&f(0,"mat-row")}var Ze=class i{recompensa=[];filteredRecompensas=[];contenidoRecompensas=[];planAlimenticioRecompensas=[];recompensaService=c($e);snackBar=c(P);router=c(E);authService=c(w);displayedColumnsContenido=["id","nombre","descripcion","diasRequeridos","contenidoTitulo","acciones"];displayedColumnsPlanAlimenticio=["id","nombre","descripcion","diasRequeridos","planAlimenticioTitulo","acciones"];ngOnInit(){this.loadRecompensa()}loadRecompensa(){this.recompensaService.getAllRecompensas().subscribe({next:e=>{this.contenidoRecompensas=e.filter(t=>t.contenidoTitulo),this.planAlimenticioRecompensas=e.filter(t=>t.planAlimenticioTitulo)},error:e=>{this.showSnackBar("Error al cargar las recompensas")}})}createNewRecompensa(){this.router.navigate(["/nutricionista/recompensa/create"])}editarRecompensaNavigate(e){this.router.navigate([`/nutricionista/recompensa/edit/${e}`])}deleteRecompensa(e){this.recompensaService.deleteRecompensa(e).subscribe({next:()=>{this.loadRecompensa(),this.showSnackBar("Recompensa eliminada")},error:()=>{this.showSnackBar("Error al eliminar la recompensa")}})}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-recompensas-list"]],standalone:!0,features:[M],decls:51,vars:6,consts:[[1,"plan"],[1,"plan-titulo"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus"],[3,"dataSource"],["matColumnDef","id"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","diasRequeridos"],["matColumnDef","planAlimenticioTitulo"],["matColumnDef","acciones"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["matColumnDef","contenidoTitulo"],[1,"button-group","d-flex"],["mat-raised-button","",1,"btn","btn-primary","me-3",3,"click"],["mat-raised-button","",1,"btn","btn-danger",3,"click"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2")(3,"strong"),a(4,"RECOMPENSAS"),n()()(),o(5,"div")(6,"button",2),C("click",function(){return r.createNewRecompensa()}),f(7,"i",3),a(8," Nuevo Recompensa "),n()()(),o(9,"mat-table",4),b(10,5),p(11,ni,2,0,"mat-header-cell",6)(12,oi,2,1,"mat-cell",7),S(),b(13,8),p(14,ai,2,0,"mat-header-cell",6)(15,ri,2,1,"mat-cell",7),S(),b(16,9),p(17,li,2,0,"mat-header-cell",6)(18,mi,2,1,"mat-cell",7),S(),b(19,10),p(20,ci,2,0,"mat-header-cell",6)(21,si,2,1,"mat-cell",7),S(),b(22,11),p(23,di,2,0,"mat-header-cell",6)(24,pi,3,3,"mat-cell",7),S(),b(25,12),p(26,ui,2,0,"mat-header-cell",6)(27,fi,6,0,"mat-cell",7),S(),p(28,Ci,1,0,"mat-header-row",13)(29,_i,1,0,"mat-row",14),n(),o(30,"mat-table",4),b(31,5),p(32,gi,2,0,"mat-header-cell",6)(33,hi,2,1,"mat-cell",7),S(),b(34,8),p(35,vi,2,0,"mat-header-cell",6)(36,xi,2,1,"mat-cell",7),S(),b(37,9),p(38,bi,2,0,"mat-header-cell",6)(39,Si,2,1,"mat-cell",7),S(),b(40,10),p(41,Mi,2,0,"mat-header-cell",6)(42,Ei,2,1,"mat-cell",7),S(),b(43,15),p(44,wi,2,0,"mat-header-cell",6)(45,Ii,2,1,"mat-cell",7),S(),b(46,12),p(47,Pi,2,0,"mat-header-cell",6)(48,Ai,6,0,"mat-cell",7),S(),p(49,yi,1,0,"mat-header-row",13)(50,Fi,1,0,"mat-row",14),n()),t&2&&(l(9),d("dataSource",r.planAlimenticioRecompensas),l(19),d("matHeaderRowDef",r.displayedColumnsPlanAlimenticio),l(),d("matRowDefColumns",r.displayedColumnsPlanAlimenticio),l(),d("dataSource",r.contenidoRecompensas),l(19),d("matHeaderRowDef",r.displayedColumnsContenido),l(),d("matRowDefColumns",r.displayedColumnsContenido))},dependencies:[y,ne,Re,ke,De,Te,Oe,Be,Ne,Le,Ve,je,D,O,I,A,de],styles:[".plan[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;text-align:center}.plan-titulo[_ngcontent-%COMP%]{flex:1;text-align:center}"]})};function Ri(i,e){if(i&1&&(o(0,"mat-option",8),a(1),n()),i&2){let t=e.$implicit;d("value",t.id),l(),u(" ",t.titulo," ")}}function Oi(i,e){if(i&1&&(o(0,"mat-option",8),a(1),n()),i&2){let t=e.$implicit;d("value",t.id),l(),u(" ",t.planObjetivo," ")}}var Se=class i{recompensaForm;titulo;textoBoton;isEditMode=!1;recompensaId;contenidoOptions=[];planAlimenticioOptions=[];fb=c(ee);router=c(E);snackBar=c(P);recompensaService=c($e);planAlimenticioService=c(z);contenidoService=c(se);authService=c(w);route=c(W);ngOnInit(){this.recompensaId=Number(this.route.snapshot.paramMap.get("id")),this.isEditMode=!!this.recompensaId,this.titulo=this.isEditMode?"Editar Recompensa":"A\xF1adir Recompensa",this.textoBoton=this.isEditMode?"Actualizar Recompensa":"A\xF1adir Recompensa",this.recompensaForm=this.fb.group({nombre:[""],descripcion:[""],diasRequeridos:["",[_.required,_.min(1)]],nutricionistaId:[this.authService.getNutricionistaId()],contenidoId:[null],planAlimenticioId:[null]},{validators:this.validateSingleSelection}),this.loadContenidoOptions(),this.loadPlanAlimenticioOptions(),this.isEditMode&&this.loadRecompensa()}loadContenidoOptions(){this.contenidoService.getAllContenidos().subscribe({next:e=>this.contenidoOptions=e,error:()=>this.showSnackBar("Error al cargar los contenidos disponibles")})}loadPlanAlimenticioOptions(){this.planAlimenticioService.getPlanAlimenticio(Number(this.authService.getNutricionistaId())).subscribe({next:e=>this.planAlimenticioOptions=e,error:()=>this.showSnackBar("Error al cargar los planes alimenticios disponibles")})}loadRecompensa(){this.recompensaService.getRecompensaById(this.recompensaId).subscribe({next:e=>this.recompensaForm.patchValue(e),error:()=>this.showSnackBar("Error al cargar la recompensa")})}validateSingleSelection(e){let t=e.get("contenidoId")?.value,r=e.get("planAlimenticioId")?.value;return t&&r||!t&&!r?{invalidSelection:!0}:null}onSubmit(){if(this.recompensaForm.invalid){this.showSnackBar("Por favor, corrija los errores en el formulario");return}let e=Me({},this.recompensaForm.value);e.contenidoId||delete e.contenidoId,e.planAlimenticioId||delete e.planAlimenticioId,this.isEditMode?this.recompensaService.updateRecompensa(this.recompensaId,e).subscribe({next:()=>{this.showSnackBar("Recompensa actualizada correctamente"),this.router.navigate(["/nutricionista/recompensa"])},error:()=>this.showSnackBar("Error al actualizar la recompensa")}):this.recompensaService.createRecompensa(e).subscribe({next:()=>{this.showSnackBar("Recompensa a\xF1adida correctamente"),this.router.navigate(["/nutricionista/recompensa"])},error:()=>this.showSnackBar("Error al a\xF1adir la recompensa")})}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-recompensas-form"]],standalone:!0,features:[M],decls:38,vars:7,consts:[[1,"container-form"],[1,"form-section",3,"ngSubmit","formGroup"],[1,"text-center"],[1,"form-field"],["matInput","","formControlName","nombre","type","text","placeholder","Ingrese el nombre de la recompensa"],["matInput","","formControlName","descripcion","placeholder","Ingrese la descripci\xF3n de la recompensa"],["matInput","","formControlName","diasRequeridos","type","number","placeholder","Ingrese los d\xEDas requeridos"],["formControlName","contenidoId"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","planAlimenticioId"],["mat-raised-button","","color","primary","type","submit",1,"btn","btn-primary"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"form",1),C("ngSubmit",function(){return r.onSubmit()}),o(2,"h2",2)(3,"strong"),a(4),n()(),o(5,"div")(6,"mat-form-field",3)(7,"mat-label"),a(8,"Nombre de Recompensa"),n(),f(9,"input",4),n()(),o(10,"div")(11,"mat-form-field",3)(12,"mat-label"),a(13,"Descripci\xF3n"),n(),f(14,"textarea",5),n()(),o(15,"div")(16,"mat-form-field",3)(17,"mat-label"),a(18,"D\xEDas Requeridos"),n(),f(19,"input",6),n()(),o(20,"div")(21,"mat-form-field",3)(22,"mat-label"),a(23,"Seleccionar Contenido"),n(),o(24,"mat-select",7)(25,"mat-option",8),a(26,"Ninguno"),n(),p(27,Ri,2,2,"mat-option",9),n()()(),o(28,"div")(29,"mat-form-field",3)(30,"mat-label"),a(31,"Seleccionar Plan Alimenticio"),n(),o(32,"mat-select",10)(33,"mat-option",8),a(34,"Ninguno"),n(),p(35,Oi,2,2,"mat-option",9),n()()(),o(36,"button",11),a(37),n()()()),t&2&&(l(),d("formGroup",r.recompensaForm),l(3),oe(r.titulo),l(21),d("value",null),l(2),d("ngForOf",r.contenidoOptions),l(6),d("value",null),l(2),d("ngForOf",r.planAlimenticioOptions),l(2),u(" ",r.textoBoton," "))},dependencies:[y,G,I,ie,L,N,F,A,Z,J,re,K,Y,q,Q,X,R,te,T,O,B],styles:[".container-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.form-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:100%;max-width:500px}.form-field[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}button[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px}label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:700}#esGratis[_ngcontent-%COMP%]{text-align:center;margin:auto 0}.container-radio-button[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center}"]})};var Ga=[{path:"",component:Ue,children:[{path:"gestionar-perfiles/list",component:Ke},{path:"plan-alimenticio/list",component:ze},{path:"plan-alimenticio/create",component:xe},{path:"plan-alimenticio/edit/:id",component:xe},{path:"plan-alimenticio/comida/:planId/agregar",component:be},{path:"plan-alimenticio/comida/:planId/editar/:comidaId",component:be},{path:"comida/list",component:We},{path:"contenido",component:Ye},{path:"contenido/create",component:ve},{path:"contenido/edit/:id",component:ve},{path:"recompensa",component:Ze},{path:"recompensa/create",component:Se},{path:"recompensa/edit/:id",component:Se}]}];export{Ga as nutricionistaRoutes};
